# ADR 0003: PDF 다운로드 시 CORP 차단 문제 해결을 위한 정책 완화

## 1. Context (도입 배경 및 문제 상황)
- 서비스 사용자가 변환된 PDF를 다운로드할 때 "사이트에서 사용할 수 없는 파일"이라는 문구와 함께 다운로드에 실패하는 현상 발생.
- 원인 분석 결과, `helmet` 패키지(v7+)가 기본적으로 설정하는 `Cross-Origin-Resource-Policy: same-origin` 헤더로 인해 브라우저의 보안 정책이 리소스 접근을 차단함.

## 2. Decision (결정 사항)
- 애플리케이션 전체의 보안 정책을 해제하는 대신, 정적 파일이 제공되는 `/downloads` 경로에 대해서만 `Cross-Origin-Resource-Policy` 헤더를 `cross-origin`으로 수정함.
- `express.static`의 `setHeaders` 옵션을 사용하여 특정 경로에 대한 헤더 오버라이딩을 실시함.

## 3. Consequences (결과, 장단점 및 후속 조치)
- **장점**: 전체 시스템의 보안 수준을 유지하면서 특정 문제(다운로드 실패)를 정밀하게 해결 가능함.
- **단점**: 향후 다른 정적 리소스 경로 추가 시 동일한 설정이 필요한지 검토해야 함.
- **후속 조치**: `security.md` 문서에 해당 예외 사항을 반영함.